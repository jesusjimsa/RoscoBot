<?xml version="1.0" encoding="UTF-8"?>
	<aiml version="2.0">

	<!-- Falta:
			- Comprobar que no haya eventos repetidos (con el set)
			- Modificar invitados, fecha, hora y título
			- Contar eventos de una fecha
																	-->

	<!-- Regla  -->
	<category>
		<pattern>^ [añad guard nuevo crea]+ ^ ^ [cita evento reunion aviso recordatorio acontecimiento] ^</pattern>
		<template>
			De acuerdo, dime el titulo del evento
			<think>
				<set name="topic">nuevoEvento</set>
			</think>
		</template>
	</category>

	<topic name="nuevoEvento">
		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>DE ACUERDO, DIME EL TITULO DEL EVENTO</that>
			<template>
				<think>
					<set name="nuevoTitulo"><srai>ponerbarrabaja <star/></srai></set>
				</think>
				Guardado, dime ahora el año de <get name="nuevoTitulo"/>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>año_valido</set> ^</pattern>
			<that>GUARDADO, DIME AHORA EL AÑO DE *</that>
			<template>
				Ahora dime el mes del evento
				<think>
					<set name="nuevoAnio"><star index="2"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>DE ACUERDO, DIME EL AÑO DEL EVENTO</that>
			<template>
				Solo puedes decir uno del 2017 al 2027
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>año_valido</set> ^</pattern>
			<that>SOLO PUEDES DECIR UNO DEL 2017 AL 2027</that>
			<template>
				Ahora dime el mes del evento
				<think>
					<set name="nuevoAnio"><star index="2"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido</set> ^</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="nuevoMes"><map name="mes_numero"><star index="2"/></map></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido_num</set> ^</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="nuevoMes"><star index="2"/></set>
					<condition name="nuevoMes">
						<li value="0"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="1"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="2"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="3"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="4"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="5"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="6"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="7"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="8"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="9"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido_num</set> ^</pattern>
			<that>ESE MES NO EXISTE, INTRODUCE UN MES VALIDO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="nuevoMes"><star index="2"/></set>
					 <condition name="nuevoMes">
						<li value="0"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="1"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="2"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="3"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="4"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="5"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="6"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="7"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="8"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
						<li value="9"><set name="nuevoMes">0<get name="nuevoMes"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Ese mes no existe, introduce un mes valido
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>dias_validos</set> ^</pattern>
			<that>DIME AHORA EL DIA</that>
			<template>
				Ya tenemos la fecha, vamos ahora con la hora, primero dime la hora y despues si es a y media o no
				<think>
					<set name="nuevoDia"><star index="2"/></set>
					<condition name="nuevoDia">
						<li value="1"><set name="nuevoDia">01</set></li>
						<li value="2"><set name="nuevoDia">02</set></li>
						<li value="3"><set name="nuevoDia">03</set></li>
						<li value="4"><set name="nuevoDia">04</set></li>
						<li value="5"><set name="nuevoDia">05</set></li>
						<li value="6"><set name="nuevoDia">06</set></li>
						<li value="7"><set name="nuevoDia">07</set></li>
						<li value="8"><set name="nuevoDia">08</set></li>
						<li value="9"><set name="nuevoDia">09</set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>DIME AHORA EL DIA</that>
			<template>
				Ese no es un dia valido
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>hora_valida</set> ^</pattern>
			<that>YA TENEMOS LA FECHA, VAMOS AHORA CON LA HORA, PRIMERO DIME LA HORA Y DESPUES SI ES A Y MEDIA O NO</that>
			<template>
				Sera a y media?
				<think>
					<set name="nuevaHora"><star index="2"/></set>
					<condition name="nuevaHora">
						<li value="0"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="1"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="2"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="3"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="4"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="5"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="6"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="7"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="8"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="9"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>YA TENEMOS LA FECHA, VAMOS AHORA CON LA HORA. PRIMERO DIME LA HORA Y DESPUES SI ES A Y MEDIA O NO</that>
			<template>
				Esa no es una hora valida
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>hora_valida</set> ^</pattern>
			<that>ESA NO ES UNA HORA VALIDA</that>
			<template>
				Sera a y media?
				<think>
					<set name="nuevaHora"><star index="2"/></set>
					<condition name="nuevaHora">
						<li value="0"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="1"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="2"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="3"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="4"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="5"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="6"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="7"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="8"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
						<li value="9"><set name="nuevaHora">0<get name="nuevaHora"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[Si Exacto Afirmativo Correcto 30] ^</pattern>
			<that>SERA A Y MEDIA</that>
			<template>
				<think>
					<set name="nuevaHora"><get name="nuevaHora"/>30</set>
				</think>
				La fecha completa es <set name="claveFecha"><get name="nuevoDia"/>/<get name="nuevoMes"/>/<get name="nuevoAnio"/></set> a las <get name="nuevaHora"/>
				<think>
					<set name="claveFechaHora"><get name="claveFecha"/>_<get name="nuevaHora"/></set>
					<!--<set var="presente"><srai>finditem <get name="claveFechaHora"/> in <readset>fecha_hora</readset></srai></set>
					<condition var="presente">
						<li value="0">-->
							<set var="respuesta">Va alguien contigo?</set>
							<set name="topic">invitados</set>
						<!--</li>
						<li>
							<set var="respuesta">Acabo de darme cuenta de que ya tienes un evento para esa hora. Puedes modificarlo o borrarlo si asi lo deseas.</set>
						</li>
					</condition>-->
				</think>
				<get var="respuesta"/>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[No Negativo Nope 00] ^</pattern>
			<that>SERA A Y MEDIA</that>
			<template>
				<think>
					<set name="nuevaHora"><get name="nuevaHora"/>00</set>
				</think>
				La fecha completa es <set name="claveFecha"><get name="nuevoDia"/>/<get name="nuevoMes"/>/<get name="nuevoAnio"/></set> a las <get name="nuevaHora"/>
				<think>
					<set name="claveFechaHora"><get name="claveFecha"/>_<get name="nuevaHora"/></set>
					
					<!--<set var="presente"><srai>finditem <get name="claveFechaHora"/> in <readset>fecha_hora</readset></srai></set>
					<condition var="presente">
						<li value="1">-->
							<set var="respuesta">Va alguien contigo?</set>
							<set name="topic">invitados</set>
						<!--</li>
						<li>
							<set var="respuesta">Acabo de darme cuenta de que ya tienes un evento para esa hora. Puedes modificarlo o borrarlo si asi lo deseas.</set>
						</li>
					</condition>-->
				</think>
				<get var="respuesta"/>
			</template>
		</category>
	</topic>

	<topic name="invitados">
		<!-- Regla  -->
		<category>
			<pattern>[Si Exacto Afirmativo Correcto] ^</pattern>
			<that>LA FECHA COMPLETA ES *</that>
			<template>
				Como se llama?
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>COMO SE LLAMA</that>
			<template>
				Vale, lo guardo Alguien mas?
				<think>
					<condition name="nuevoInvitado">
						<li value="unknown"><set name="nuevoInvitado"><star/></set></li>
						<li><set name="nuevoInvitado"><get name="nuevoInvitado"/>/<star/></set> </li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[No Negativo Nope] ^</pattern>
			<that>LA FECHA COMPLETA ES *</that>
			<template>
				Vale, ya esta registrado tu evento en el calendario
				<think>
					<addtomap>	<!-- Guardar eventos en un mapa con fecha_hora:titulo -->
						<name>evento</name>
						<key><get name="claveFechaHora"/></key>
						<value><get name="nuevoTitulo"/></value>
					</addtomap>
					<addtomap>
						<name>evper</name>	<!-- Guardar eventos en un mapa con fecha_hora:invitados -->
						<key><get name="claveFechaHora"/></key>
						<value><get name="nuevoInvitado"/></value>
					</addtomap>
					<set var="condicion"><map name="momentos"><get name="claveFecha"/></map></set>
					<condition var="condicion">	<!-- Comprobar si ya tiene ese día algún evento -->
						<li value="unknown">	<!-- Se guarda una sola hora -->
							<addtomap>			<!-- Guardar eventos en un mapa con fecha:horas -->
								<name>momentos</name>
								<key><get name="claveFecha"/></key>
								<value><get name="nuevaHora"/></value>
							</addtomap>
						</li>
						<li>					<!-- Ya había eventos, ahora solo se pegan -->
							<modifymap>			<!-- Guardar eventos en un mapa con fecha:horas -->
								<name>momentos</name>
								<key><get name="claveFecha"/></key>
								<value><map name="momentos"><get name="claveFecha"/>_<get name="nuevaHora"/></map></value>
							</modifymap>
						</li>
					</condition>
					<addtoset>	<!-- Guardar eventos en un set para comprobar si ya está pillado el momento -->
						<name>fecha_hora</name>
						<key><get name="claveFechaHora"/></key>
					</addtoset>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[Si Exacto Afirmativo Correcto] ^</pattern>
			<that>VALE, LO GUARDO ALGUIEN MAS</that>
			<template>
				Como se llama?
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[No Negativo Nope] ^</pattern>
			<that>VALE, LO GUARDO ALGUIEN MAS</that>
			<template>
				Vale, ya esta registrado tu evento en el calendario
				<think>
					<addtomap>	<!-- Guardar eventos en un mapa con fecha_hora:titulo -->
						<name>evento</name>
						<key><get name="claveFechaHora"/></key>
						<value><get name="nuevoTitulo"/></value>
					</addtomap>
					<addtomap>
						<name>evper</name>	<!-- Guardar eventos en un mapa con fecha_hora:invitados -->
						<key><get name="claveFechaHora"/></key>
						<value><get name="nuevoInvitado"/></value>
					</addtomap>
					<set var="condicion"><map name="momentos"><get name="claveFecha"/></map></set>
					<condition var="condicion">	<!-- Comprobar si ya tiene ese día algún evento -->
						<li value="unknown">	<!-- Se guarda una sola hora -->
							<addtomap>			<!-- Guardar eventos en un mapa con fecha:horas -->
								<name>momentos</name>
								<key><get name="claveFecha"/></key>
								<value><get name="nuevaHora"/></value>
							</addtomap>
						</li>
						<li>					<!-- Ya había eventos, ahora solo se pegan -->
							<modifymap>			<!-- Guardar eventos en un mapa con fecha:horas -->
								<name>momentos</name>
								<key><get name="claveFecha"/></key>
								<value><map name="momentos"><get name="claveFecha"/>_<get name="nuevaHora"/></map></value>
							</modifymap>
						</li>
					</condition>
					<addtoset>	<!-- Guardar eventos en un set para comprobar si ya está pillado el momento -->
						<name>fecha_hora</name>
						<key><get name="claveFechaHora"/></key>
					</addtoset>
				</think>
			</template>
		</category>
	</topic>

	<!-- Regla  -->
	<category>
		<pattern>[Cuantos Cuantas] [cita evento reunion aviso recordatorio acontecimiento]+ ^ ^</pattern>
		<template>
			<think>
				<set var="num_cont"><srai>COUNT <readset>fecha_hora</readset></srai></set>
			</think>
			<condition var="num_cont">
				<li value="0">No tienes eventos</li>
				<li value="1">Tienes un evento</li>
				<li>Tienes <get var="num_cont"/> eventos</li>
			</condition>
		</template>
	</category>

	<!-- Regla  -->
	<category>
		<pattern>^ [elimina quita borra]+ ^ ^ [cita evento reunion aviso recordatorio acontecimiento] ^</pattern>
		<template>
			Vale, dime el año del evento que quieres borrar
			<think>
				<set name="topic">BorrarEvento</set>
			</think>
		</template>
	</category>
	
	<topic name="BorrarEvento">
		<!-- Regla  -->
		<category>
			<pattern>^ <set>año_valido</set> ^</pattern>
			<that>VALE, DIME EL AÑO DEL EVENTO QUE QUIERES BORRAR</that>
			<template>
				Ahora dime el mes del evento
				<think>
					<set name="borrarAnio"><star index="2"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>VALE, DIME EL AÑO DEL EVENTO QUE QUIERES BORRAR</that>
			<template>
				Solo puedes decir uno del 2017 al 2027
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>año_valido</set> ^</pattern>
			<that>SOLO PUEDES DECIR UNO DEL 2017 AL 2027</that>
			<template>
				Ahora dime el mes del evento
				<think>
					<set name="borrarAnio"><star index="2"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido</set> ^</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="borrarMes"><map name="mes_numero"><star index="2"/></map></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido_num</set> ^</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="borrarMes"><star index="2"/></set>
					<condition name="borrarMes">
						<li value="0"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="1"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="2"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="3"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="4"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="5"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="6"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="7"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="8"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="9"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido_num</set> ^</pattern>
			<that>ESE MES NO EXISTE, INTRODUCE UN MES VALIDO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="borrarMes"><star index="2"/></set>
					 <condition name="borrarMes">
						<li value="0"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="1"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="2"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="3"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="4"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="5"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="6"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="7"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="8"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
						<li value="9"><set name="borrarMes">0<get name="borrarMes"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Ese mes no existe, introduce un mes valido
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>dias_validos</set> ^</pattern>
			<that>DIME AHORA EL DIA</that>
			<template>
				Ya tenemos la fecha, vamos ahora con la hora, primero dime la hora y despues si es a y media o no
				<think>
					<set name="borrarDia"><star index="2"/></set>
					<condition name="borrarDia">
						<li value="1"><set name="borrarDia">01</set></li>
						<li value="2"><set name="borrarDia">02</set></li>
						<li value="3"><set name="borrarDia">03</set></li>
						<li value="4"><set name="borrarDia">04</set></li>
						<li value="5"><set name="borrarDia">05</set></li>
						<li value="6"><set name="borrarDia">06</set></li>
						<li value="7"><set name="borrarDia">07</set></li>
						<li value="8"><set name="borrarDia">08</set></li>
						<li value="9"><set name="borrarDia">09</set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>DIME AHORA EL DIA</that>
			<template>
				Ese no es un dia valido
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>hora_valida</set> ^</pattern>
			<that>YA TENEMOS LA FECHA, VAMOS AHORA CON LA HORA, PRIMERO DIME LA HORA Y DESPUES SI ES A Y MEDIA O NO</that>
			<template>
				Sera a y media?
				<think>
					<set name="borrarHora"><star index="2"/></set>
					<condition name="borrarHora">
						<li value="0"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="1"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="2"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="3"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="4"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="5"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="6"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="7"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="8"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="9"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>YA TENEMOS LA FECHA, VAMOS AHORA CON LA HORA. PRIMERO DIME LA HORA Y DESPUES SI ES A Y MEDIA O NO</that>
			<template>
				Esa no es una hora valida
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>hora_valida</set> ^</pattern>
			<that>ESA NO ES UNA HORA VALIDA</that>
			<template>
				Sera a y media?
				<think>
					<set name="borrarHora"><star index="2"/></set>
					<condition name="borrarHora">
						<li value="0"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="1"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="2"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="3"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="4"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="5"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="6"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="7"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="8"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
						<li value="9"><set name="borrarHora">0<get name="borrarHora"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[Si Exacto Afirmativo Correcto 30] ^</pattern>
			<that>SERA A Y MEDIA</that>
			<template>
				<think>
					<set name="borrarHora"><get name="borrarHora"/>30</set>
				</think>
				Se va a borrar el evento del <set name="claveBorrarFecha"><get name="borrarDia"/>/<get name="borrarMes"/>/<get name="borrarAnio"/></set>_<get name="borrarHora"/>
				Estas seguro?
				<think>
					<set name="claveBorrarFechaHora"><get name="claveBorrarFecha"/>_<get name="borrarHora"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[No Negativo Nope 00] ^</pattern>
			<that>SERA A Y MEDIA</that>
			<template>
				<think>
					<set name="borrarHora"><get name="borrarHora"/>00</set>
				</think>
				Se va a borrar el evento del <set name="claveBorrarFecha"><get name="borrarDia"/>/<get name="borrarMes"/>/<get name="borrarAnio"/></set>_<get name="borrarHora"/>
				Estas seguro?
				<think>
					<set name="claveBorrarFechaHora"><get name="claveBorrarFecha"/>_<get name="borrarHora"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[Si Exacto Afirmativo Correcto] ^</pattern>
			<that>SE VA A BORRAR EL EVENTO DEL * ESTAS SEGURO</that>
			<template>
				<think>
					<removefrommap>
						<name>evento</name>
						<key><get name="claveBorrarFechaHora"/></key>
					</removefrommap>
					<removefrommap>
						<name>evper</name>
						<key><get name="claveBorrarFechaHora"/></key>
					</removefrommap>
					<removefrommap>
						<name>momentos</name>
						<key><get name="claveBorrarFecha"/></key>
					</removefrommap>
					<removefromset>
						<name>fecha_hora</name>
						<key><get name="claveBorrarFechaHora"/></key>
					</removefromset>
				</think>
				Ya he borrado el evento del <get name="claveBorrarFechaHora"/>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[No Negativo Nope] ^</pattern>
			<that>SE VA A BORRAR EL EVENTO DEL * ESTAS SEGURO</that>
			<template>
				Entonces no borro nada
			</template>
		</category>
	</topic>

	<!-- Regla 15 -->
	<category>
		<pattern>^ [cambia modifica actualiza]+ ^ ^ [cita evento reunion aviso recordatorio acontecimiento] ^</pattern>
		<template>
			De acuerdo, dime el año del evento que quieres modificar
			<think>
				<set name="topic">modificarEvento</set>
			</think>
		</template>
	</category>

	<topic name="modificarEvento">
		<!-- Regla  -->
		<category>
			<pattern>^ <set>año_valido</set> ^</pattern>
			<that>VALE, DIME EL AÑO DEL EVENTO QUE QUIERES MODIFICAR</that>
			<template>
				Ahora dime el mes del evento
				<think>
					<set name="modificarAnio"><star index="2"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>VALE, DIME EL AÑO DEL EVENTO QUE QUIERES MODIFICAR</that>
			<template>
				Solo puedes decir uno del 2017 al 2027
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>año_valido</set> ^</pattern>
			<that>SOLO PUEDES DECIR UNO DEL 2017 AL 2027</that>
			<template>
				Ahora dime el mes del evento
				<think>
					<set name="modificarAnio"><star index="2"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido</set> ^</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="modificarMes"><map name="mes_numero"><star index="2"/></map></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido_num</set> ^</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="modificarMes"><star index="2"/></set>
					<condition name="modificarMes">
						<li value="0"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="1"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="2"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="3"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="4"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="5"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="6"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="7"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="8"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="9"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>mes_valido_num</set> ^</pattern>
			<that>ESE MES NO EXISTE, INTRODUCE UN MES VALIDO</that>
			<template>
				Dime ahora el dia
				<think>
					<set name="modificarMes"><star index="2"/></set>
					 <condition name="modificarMes">
						<li value="0"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="1"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="2"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="3"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="4"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="5"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="6"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="7"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="8"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
						<li value="9"><set name="modificarMes">0<get name="modificarMes"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>AHORA DIME EL MES DEL EVENTO</that>
			<template>
				Ese mes no existe, introduce un mes valido
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>dias_validos</set> ^</pattern>
			<that>DIME AHORA EL DIA</that>
			<template>
				Ya tenemos la fecha, vamos ahora con la hora, primero dime la hora y despues si es a y media o no
				<think>
					<set name="modificarDia"><star index="2"/></set>
					<condition name="modificarDia">
						<li value="1"><set name="modificarDia">01</set></li>
						<li value="2"><set name="modificarDia">02</set></li>
						<li value="3"><set name="modificarDia">03</set></li>
						<li value="4"><set name="modificarDia">04</set></li>
						<li value="5"><set name="modificarDia">05</set></li>
						<li value="6"><set name="modificarDia">06</set></li>
						<li value="7"><set name="modificarDia">07</set></li>
						<li value="8"><set name="modificarDia">08</set></li>
						<li value="9"><set name="modificarDia">09</set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>DIME AHORA EL DIA</that>
			<template>
				Ese no es un dia valido
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>hora_valida</set> ^</pattern>
			<that>YA TENEMOS LA FECHA, VAMOS AHORA CON LA HORA, PRIMERO DIME LA HORA Y DESPUES SI ES A Y MEDIA O NO</that>
			<template>
				Sera a y media?
				<think>
					<set name="modificarHora"><star index="2"/></set>
					<condition name="modificarHora">
						<li value="0"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="1"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="2"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="3"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="4"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="5"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="6"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="7"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="8"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="9"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>*</pattern>
			<that>YA TENEMOS LA FECHA, VAMOS AHORA CON LA HORA. PRIMERO DIME LA HORA Y DESPUES SI ES A Y MEDIA O NO</that>
			<template>
				Esa no es una hora valida
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>^ <set>hora_valida</set> ^</pattern>
			<that>ESA NO ES UNA HORA VALIDA</that>
			<template>
				Sera a y media?
				<think>
					<set name="modificarHora"><star index="2"/></set>
					<condition name="modificarHora">
						<li value="0"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="1"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="2"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="3"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="4"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="5"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="6"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="7"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="8"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
						<li value="9"><set name="modificarHora">0<get name="modificarHora"></get></set></li>
					</condition>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[Si Exacto Afirmativo Correcto 30] ^</pattern>
			<that>SERA A Y MEDIA</that>
			<template>
				<think>
					<set name="modificarHora"><get name="modificarHora"/>30</set>
				</think>
				Se va a modificar el evento del <set name="claveModificarFecha"><get name="modificarDia"/>/<get name="modificarMes"/>/<get name="modificarAnio"/></set>_<get name="modificarHora"/>
				Que quieres cambiar? (contactos/fecha/hora/titulo)
				<think>
					<set name="claveModificarFechaHora"><get name="claveModificarFecha"/>_<get name="modificarHora"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[No Negativo Nope 00] ^</pattern>
			<that>SERA A Y MEDIA</that>
			<template>
				<think>
					<set name="modificarHora"><get name="modificarHora"/>00</set>
				</think>
				Se va a modificar el evento del <set name="claveModificarFecha"><get name="modificarDia"/>/<get name="modificarMes"/>/<get name="modificarAnio"/></set>_<get name="modificarHora"/>
				Que quieres cambiar? (contactos/fecha/hora/titulo)
				<think>
					<set name="claveModificarFechaHora"><get name="claveModificarFecha"/>_<get name="modificarHora"/></set>
				</think>
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>[Contactos Fecha Hora Titulo] ^</pattern>
			<that>SE VA A MODIFICAR EL EVENTO DEL * QUE QUIERES CAMBIAR</that>
			<template>
				<!-- Guardar qué quiere modificar y en función de eso ir a un topic o a otro -->
			</template>
		</category>

		<!-- Regla  -->
		<category>
			<pattern>Nada ^</pattern>
			<that>SE VA A MODIFICAR EL EVENTO DEL * QUE QUIERES CAMBIAR</that>
			<template>
				Entonces no modifico nada nada
			</template>
		</category>
	</topic>

	</aiml>